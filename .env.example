# =============================================
# PostgreSQL DDL Extractor — Environment Config
# =============================================
# Copy this file to .env and fill in your credentials.
# CLI flags override these values (see README).

# ─── DEV Database (direct connection) ────────
DEV_DB_HOST=localhost
DEV_DB_PORT=5432
DEV_DB_NAME=your_dev_database
DEV_DB_USER=postgres
DEV_DB_PASSWORD=your_password

# ─── PROD Database (via SSH tunnel) ──────────
#
# How it works:
#   Your machine  →  SSH into prod server  →  connect to DB
#   localhost:random_port → SSH_HOST:22 → DB_HOST:5432
#
# DB_HOST is the address as seen FROM the SSH server.
# If PostgreSQL runs on the same machine as SSH, use 127.0.0.1

PROD_DB_HOST=127.0.0.1
PROD_DB_PORT=5432
PROD_DB_NAME=your_prod_database
PROD_DB_USER=postgres
PROD_DB_PASSWORD=your_password

# SSH connection (set SSH_HOST to enable tunnel)
PROD_SSH_HOST=your-prod-server.com
PROD_SSH_PORT=22
PROD_SSH_USER=your_ssh_user

# Auth option 1: SSH key (recommended)
PROD_SSH_KEY_PATH=~/.ssh/id_rsa
# PROD_SSH_PASSPHRASE=your_key_passphrase

# Auth option 2: SSH password
# PROD_SSH_PASSWORD=your_ssh_password

# ─── Optional Configuration ─────────────────

# Custom output directory for SQL files (default: ./sql)
# SQL_OUTPUT_DIR=/custom/path/to/sql

# ─── Notes ───────────────────────────────────
# Priority: CLI flags → Environment variables → .env file
# SSH tunnel is auto-detected: if PROD_SSH_HOST is set → tunnel, else → direct
# DEV can also use SSH: just add DEV_SSH_HOST, DEV_SSH_USER, etc.
# Key auth takes priority over password if both are set
#
# ─── Available Commands ──────────────────────
#
# Core:
#   pg-ddl-extract --env dev          Extract DDL → sql/dev/
#   pg-ddl-diff                       Compare DEV vs PROD schemas
#   pg-ddl-migrate                    Generate migration SQL
#   pg-ddl-init                       Initialize project structure
#
# Analysis:
#   pg-ddl-lint --env dev             Lint schema for issues
#   pg-ddl-validate --env dev         Validate schema conventions
#   pg-ddl-deps --env dev             Show FK dependency graph
#   pg-ddl-size --env dev             Storage size analysis
#   pg-ddl-stats --env dev            Database statistics
#   pg-ddl-search "keyword"           Search extracted SQL files
#
# Documentation:
#   pg-ddl-docs --env dev             Generate Markdown docs → sql/docs/
#   pg-ddl-changelog                  Git-based schema changelog
#   pg-ddl-snapshot-diff --from v1 --to v2  Compare Git snapshots
#
# Automation:
#   pg-ddl-watch --env dev            Watch for schema changes
